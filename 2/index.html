<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>疫苗接种信息</title>
<!-- gadget2 -->
<script src="../js/echarts.min.js"></script>
<script src="../js/jquery.min.js"></script>
<link rel="stylesheet" href="../css/time.css">
<!-- Bootstrap -->
<link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css" >
</head>
<body>
  <!--导航条-->
  <div id="hname" style="background-color:#666FFF;">
    <div id="title"><span class="time"></span></div>
    <div class="btn-group" role="group" aria-label="...">
      <button type="button" class="btn btn-info" id="btn1">玫瑰图</button>
      <button type="button" class="btn btn-success" id="btn2">疫苗接种信息</button>
      <button type="button" class="btn btn-warning" id="btn3">疫情大地图</button>
      <button type="button" class="btn btn-success" id="btn4">死亡人数排名</button>
    </div>
  </div>
  
  <div  style="background-color:#FFFFFF;height:700px;float:left;">    
  <!-- gadget2 -->
  <div class="center col-lg-12" style="width: 1300px;height:500px;position:relative;">

    <div style="width: 500px;height: 350px;top:10px;float: left" id="vaccinationsMain01" ></div>

    <div style="width: 600px;height: 350px;top:10px;float: right" id="vaccinationsMain02"></div>
    <table  bgcolor="#F1F8F4" width="150px" >
      <thead>
      <tr>
        <th style="text-align: center">
          全球累计接种
        </th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td id="worldVac" style="font-weight: bolder;color: #178B50;text-align: center">12356</td>
      </tr>
      </tbody>
    </table>
    <br>
    <table  bgcolor="#F1F8F4" width="150px" >
      <thead>
      <tr>
        <th style="text-align: center">
          中国累计接种
        </th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td id="chinaVac" style="font-weight: bolder;color: #178B50;text-align: center">200</td>
      </tr>
      </tbody>
    </table>
    <script type="text/javascript">

      var ChinaTotal_vaccinations;
      var ChinaTotal_vaccinations_per_hundred;
      var WorldTotal_vaccinations ;
      var WorldTotal_vaccinations_per_hundred;
      function getData(){
        $.ajax({
          type:'get',
          url:'https://api.inews.qq.com/newsqa/v1/automation/modules/list?modules=VaccineTopData',
          data:{
            modules:'VaccineTopData'
          },
          dataType:'json',
          success:function(res){
            ChinaTotal_vaccinations = res.data.VaccineTopData.中国.total_vaccinations;
            ChinaTotal_vaccinations_per_hundred=res.data.VaccineTopData.中国.total_vaccinations_per_hundred;
            WorldTotal_vaccinations = res.data.VaccineTopData.全球.total_vaccinations;
            WorldTotal_vaccinations_per_hundred=res.data.VaccineTopData.全球.total_vaccinations_per_hundred;
            // console.log(ChinaTotal_vaccinations);
            // console.log(ChinaTotal_vaccinations_per_hundred);
            // console.log(WorldTotal_vaccinations);
            // console.log(WorldTotal_vaccinations_per_hundred);
            $("#worldVac").html(WorldTotal_vaccinations+"剂次");
            $("#chinaVac").html(ChinaTotal_vaccinations+"剂次");
            leftDetail(ChinaTotal_vaccinations,WorldTotal_vaccinations);
            rightDetail(ChinaTotal_vaccinations_per_hundred,WorldTotal_vaccinations_per_hundred);
          }
        });
      }
      getData();
      function leftDetail(china,world) {
        var charDom = document.getElementById('vaccinationsMain01');
        var myChart = echarts.init(charDom);
        option = {
          title: {
            text: '全球疫苗接种信息',
            //subtext: 'by Krystal',
            left: 'center'
          },
          tooltip: {
            trigger: 'item',
            formatter:'{b}：{c}剂'
          },
          legend: {
            orient: 'vertical',
            left: 'left',
          },
          series: [
            {
              name: '',
              type: 'pie',
              radius: '50%',
              data: [
                {value: china, name: '中国接种'},
                {value: world-china, name: '海外接种'}
              ],
              emphasis: {
                itemStyle: {
                  shadowBlur: 10,
                  shadowOffsetX: 0,
                  shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
              }
            }
          ]
        };
        myChart.setOption(option);
      }

      function rightDetail(chinaPercent,worldPercent) {
        var chartDom1 = document.getElementById('vaccinationsMain02');
        var myChart1 = echarts.init(chartDom1);
        var option;
  var spirit = 'path://roundedorange.top/DataVisualization/2/favorite.svg'
        
        var maxData = 400;

        option = {
          title:{
            text:'每百人接种率',
            left:'center'
          },
          tooltip: {
            formatter:'{b}每百人接种率: {c}%'
          },
          xAxis: {
            max: maxData,
            splitLine: {show: false},
            offset: 10,
            axisLine: {
              lineStyle: {
                color: '#999'
              }
            },
            axisLabel: {
              margin: 10
            }
          },
          yAxis: {
            data: ['中国', '全球'],
            inverse: true,
            axisTick: {show: false},
            axisLine: {show: false},
            axisLabel: {
              margin: 10,
              color: '#999',
              fontSize: 16
            }
          },
          grid: {
            top: 'center',
            height: 200,
            left: 70,
            right: 100
          },
          series: [{
            // current data
            type: 'pictorialBar',
            symbol: spirit,
            symbolRepeat: 'fixed',
            symbolMargin: '5%',
            symbolClip: true,
            symbolSize: 30,
            symbolBoundingData: maxData,
            data: [chinaPercent,worldPercent],
            markLine: {
              symbol: 'none',
              label: {
                formatter: 'max: {c}%',
                position: 'start'
              },
              lineStyle: {
                color: 'green',
                type: 'dotted',
                opacity: 0.2,
                width: 2
              },
              data: [{
                type: 'max'
              }]
            },
            z: 10
          }, {
            // full data
            type: 'pictorialBar',
            itemStyle: {
              normal: {
                opacity: 0.2
              }
            },
            label: {
              show: true,
              formatter: function (params) {
                return params.value + ' %';
              },
              position: 'right',
              offset: [10, 0],
              color: 'green',
              fontSize: 18
            },
            animationDuration: 0,
            symbolRepeat: 'fixed',
            symbolMargin: '5%',
            symbol: spirit,
            symbolSize: 30,
            symbolBoundingData: maxData,
            data: [chinaPercent, worldPercent],
            z: 5
          }]
        };

        option && myChart1.setOption(option);
      }
    </script>
  </div>
  <div id="bool" style="background-color:#F0F8FF;clear:both;text-align:center;">
      数据可视化小组作业：郑嘉骏、李晓、黄喆誉
  </div>
</body>
<script type="text/javascript" src="../js/link.js"></script>
<script type="text/javascript" src="../js/time.js"></script>
</html>